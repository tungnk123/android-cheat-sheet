1. Detecting when the user turns Location ON from Quick Settings is done using a **dynamic BroadcastReceiver** listening to `LocationManager.PROVIDERS_CHANGED_ACTION`.

	When the broadcast fires, check if Location is enabled → if yes, call your **getLocation()** function again.
	
	**No AndroidManifest entry is needed** because a dynamic receiver is used.
	
	Most real apps use **both**:
	
	- The broadcast (real-time detection)
	    
	- An additional check in **onResume()** (backup)
2. `PendingIntent.getActivity()` **won’t prevent Activity recreation**.

	Must add flags to the Intent:
	
	- `FLAG_ACTIVITY_REORDER_TO_FRONT`
	    
	- Optional: `FLAG_ACTIVITY_SINGLE_TOP`
    

3. Battery Optimization does **not** auto-grant Exact Alarm.

	Must explicitly open:
	
	- `Settings.ACTION_REQUEST_SCHEDULE_EXACT_ALARM`
    

4. Use an ActivityResult callback, re-check, then run your logic only if allowed.

	You were requesting **location permission** and **POST_NOTIFICATIONS** almost at the same time → Android only shows ONE dialog → notification permission gets skipped.
	
	Fix: chain them (request location → then request notification).
	
	Also fix your version check:
	
	- Use `>= Build.VERSION_CODES.TIRAMISU` (not `>`)

5. Compass with sensor
	- Use **sample** for flow
	- distinctUntilChanged